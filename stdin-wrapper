#!/usr/bin/env bash

# Author: w0rp <devw0rp@gmail.com>
# Description: This script implements a wrapper for any program which does not accept
#   stdin input on most Unix machines. The input to the script is read to a
#   temporary file, and the first argument sets a particular file extension
#   for the temporary file.

set -ex

# All of the following arguments are read as command to run.
file_extension="$1"
shift

temp_dir=$(mktemp -d "ale-lint-XXXXXXXXX")
temp_file="$temp_dir/file$file_extension"
trap 'rm -r $temp_dir' EXIT

cp /dev/stdin "$temp_file"

"$@" "$temp_file"
