Before:
  " This is just one example of a language using the linter.
  call ale#assert#SetUpLinterTest('markdown', 'redpen')

  " The options are shared between many languages.
  Save g:ale_redpen_options

  unlet! g:ale_redpen_options

  call ale#test#SetFilename('testfile.md')
  " Set the buffer's filetype explicitly
  setfiletype markdown
  call ale#handlers#redpen#ResetOptions()

After:
  call ale#assert#TearDownLinterTest()

Execute(The options should be omitted by default):
  AssertLinter
  \ 'redpen',
  \ 'redpen -f markdown -r json %t'

Execute(The options should be used in the command):
  let g:ale_redpen_options = '--foo --bar'

  AssertLinter
  \ 'redpen',
  \ 'redpen -f markdown -r json --foo --bar %t'

Execute(The command should work with different filetypes):
  " Test with a different filetype
  setfiletype text

  AssertLinter
  \ 'redpen',
  \ 'redpen -f text -r json %t'
